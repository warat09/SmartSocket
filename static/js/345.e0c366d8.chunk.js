"use strict";(self.webpackChunkSmartSocket=self.webpackChunkSmartSocket||[]).push([[345],{345:function(e,t,n){n.r(t),n.d(t,{default:function(){return W}});var r=n(4165),s=n(5861),a=n(885),i=n(1413),o=n(2791),c=n(6907),l=n(763),u=n(7689),d=n(9836),h=n(3382),x=n(3994),g=n(9281),p=n(5855),f=n(5527),Z=n(79),m=n(8904),j=n(9164),v=n(890),_=n(4721),b=n(7621),S=n(8550),y=n(8870),w=n(6151),k=n(6812),A=n(5473),U=n(3786),C=n(5289),M=n(5661),R=n(9157),P=n(1691),D=n(7123),N=n(5646),O=n(9152),I=n(6734),z=n(9658),B=n(184),E=[{id:"Asset_name_assets",label:"Assets",alignRight:!1},{id:"UserMatch_room",label:"Room",alignRight:!1},{id:"UserMatch_floor",label:"Floor",alignRight:!1},{id:"UserMatch_description",label:"Description",alignRight:!1},{id:"UserMatch_datetime",label:"DateTime",alignRight:!1},{id:"User_Name",label:"Name",alignRight:!1},{id:"UserMatch_status_user_match",label:"Status",alignRight:!1},{id:"User_action",label:"Action",alignRight:!1}];function F(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}var L=o.forwardRef((function(e,t){return(0,B.jsx)(z.Z,(0,i.Z)({elevation:6,ref:t,variant:"filled"},e))})),W=function(){var e=(0,u.s0)(),t=(0,o.useState)([]),n=(0,a.Z)(t,2),i=n[0],z=n[1],W=o.useState(!1),q=(0,a.Z)(W,2),T=q[0],G=q[1],H=o.useState({header:"",body:"",id:0,status:0}),J=(0,a.Z)(H,2),V=J[0],K=J[1],Q=(0,o.useState)(!1),X=(0,a.Z)(Q,2),Y=X[0],$=X[1],ee=(0,o.useState)({message:"",color:""}),te=(0,a.Z)(ee,2),ne=te[0],re=te[1],se=(0,o.useState)(""),ae=(0,a.Z)(se,2),ie=ae[0],oe=ae[1],ce=(0,o.useState)(null),le=(0,a.Z)(ce,2),ue=le[0],de=le[1],he=(0,o.useState)(0),xe=(0,a.Z)(he,2),ge=xe[0],pe=xe[1],fe=(0,o.useState)("asc"),Ze=(0,a.Z)(fe,2),me=Ze[0],je=Ze[1],ve=(0,o.useState)([]),_e=(0,a.Z)(ve,2),be=_e[0],Se=_e[1],ye=(0,o.useState)("Asset_name_assets"),we=(0,a.Z)(ye,2),ke=we[0],Ae=we[1],Ue=(0,o.useState)(""),Ce=(0,a.Z)(Ue,2),Me=Ce[0],Re=Ce[1],Pe=(0,o.useState)(5),De=(0,a.Z)(Pe,2),Ne=De[0],Oe=De[1],Ie=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=z,e.next=3,(0,m.Wb)("/UserMatch/GetApprove",t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(e,t,n){G(!0),K(1==t?{header:"Approve?",body:"Do you want approve asset ".concat(n),id:e,status:t}:{header:"Reject?",body:"Do you want reject asset ".concat(n),id:e,status:t})},Be=function(){G(!1)},Ee=function(e,t){"clickaway"!==t&&$(!1)},Fe=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),s="",1===n?(console.log("1"),s="Approve"):(console.log("2"),s="Reject"),e.next=5,(0,m._o)("/UserMatch/Approve/".concat(t),ie,s);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Le=ge>0?Math.max(0,(1+ge)*Ne-i.length):0,We=function(e,t,n){var r=e.map((function(e,t){return[e,t]}));return r.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n?(0,l.filter)(e,(function(e){return-1!==e.Asset_name_assets.toLowerCase().indexOf(n.toLowerCase())})):r.map((function(e){return e[0]}))}(i,function(e,t){return"desc"===e?function(e,n){return F(e,n,t)}:function(e,n){return-F(e,n,t)}}(me,ke),Me),qe=!We.length&&!!Me;return(0,o.useEffect)((function(){var t=localStorage.getItem("User");if(null!==window.history.state){var n=window.history.state,r=n.open,s=n.message;1===r&&(re({message:s,color:"success"}),$(!0),window.history.replaceState({},"",""))}if(t&&"undefined"!==t){var a=JSON.parse(t);Ie(a.token),oe(a.token)}else e("/login")}),[]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(c.ql,{children:(0,B.jsx)("title",{children:" Approve | SmartSocket "})}),(0,B.jsxs)(j.Z,{children:[(0,B.jsx)(v.Z,{variant:"h4",sx:{mb:5,mt:2},children:"Approve"}),(0,B.jsx)(_.Z,{sx:{borderBottomWidth:3,mb:2,borderColor:"black",borderRadius:1}}),(0,B.jsxs)(b.Z,{children:[(0,B.jsx)(I.s,{numSelected:be.length,filterName:Me,onFilterName:function(e){pe(0),Re(e.target.value)}}),(0,B.jsx)(O.Z,{children:(0,B.jsx)(g.Z,{sx:{minWidth:800},children:(0,B.jsxs)(d.Z,{children:[(0,B.jsx)(I.e,{order:me,orderBy:ke,headLabel:E,rowCount:i.length,numSelected:be.length,onRequestSort:function(e,t){je(ke===t&&"asc"===me?"desc":"asc"),Ae(t)},onSelectAllClick:function(e){if(e.target.checked){var t=i.map((function(e){return e.Asset_name_assets}));Se(t)}else Se([])}}),(0,B.jsxs)(h.Z,{children:[We.slice(ge*Ne,ge*Ne+Ne).map((function(e){console.log(e);var t=e.Asset_name_assets,n=e.UserMatch_room,r=e.UserMatch_floor,s=e.UserMatch_description,a=e.UserMatch_datetime,i=e.User_name,o=e.User_surname,c=(e.User_username,e.UserMatch_status_user_match),l=-1!==be.indexOf(t);return(0,B.jsxs)(p.Z,{hover:!0,tabIndex:-1,role:"checkbox",selected:l,children:[(0,B.jsx)(x.Z,{align:"center",children:t}),(0,B.jsx)(x.Z,{align:"center",children:n}),(0,B.jsx)(x.Z,{align:"center",children:r}),(0,B.jsx)(x.Z,{align:"center",children:(0,B.jsx)(S.Z,{InputProps:{readOnly:!0},type:"text",multiline:!0,rows:2,defaultValue:s||"No Description"})}),(0,B.jsx)(x.Z,{align:"center",children:new Date(a).toLocaleString("sv-SE",{timeZone:"Asia/Bangkok"})}),(0,B.jsx)(x.Z,{align:"center",children:i+" "+o}),(0,B.jsx)(x.Z,{align:"center",children:c}),(0,B.jsx)(x.Z,{align:"center",children:(0,B.jsxs)(y.Z,{sx:{display:"flex",justifyContent:"center"},children:[(0,B.jsx)(w.Z,{variant:"contained",size:"small",color:"success",onClick:function(){return ze(e.UserMatch_id_user_match,1,e.Asset_name_assets)},children:"Approve"}),"\xa0",(0,B.jsx)(w.Z,{variant:"contained",size:"small",color:"error",onClick:function(){return ze(e.UserMatch_id_user_match,0,e.Asset_name_assets)},children:"Reject"})]})})]},t)})),Le>0&&(0,B.jsx)(p.Z,{style:{height:53*Le},children:(0,B.jsx)(x.Z,{colSpan:6})})]}),qe&&(0,B.jsx)(h.Z,{children:(0,B.jsx)(p.Z,{children:(0,B.jsx)(x.Z,{align:"center",colSpan:9,sx:{py:3},children:(0,B.jsxs)(f.Z,{sx:{textAlign:"center"},children:[(0,B.jsx)(v.Z,{variant:"h6",paragraph:!0,children:"Not found"}),(0,B.jsxs)(v.Z,{variant:"body2",children:["No results found for \xa0",(0,B.jsxs)("strong",{children:['"',Me,'"']}),".",(0,B.jsx)("br",{})," Try checking for typos or using complete words."]})]})})})})]})})}),(0,B.jsx)(k.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:i.length,rowsPerPage:Ne,page:ge,onPageChange:function(e,t){pe(t)},onRowsPerPageChange:function(e){pe(0),Oe(parseInt(e.target.value,10))}})]})]}),(0,B.jsxs)(A.ZP,{open:Boolean(ue),anchorEl:ue,onClose:function(){de(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{p:1,width:140,"& .MuiMenuItem-root":{px:1,typography:"body2",borderRadius:.75}}},children:[(0,B.jsxs)(U.Z,{children:[(0,B.jsx)(Z.Z,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),(0,B.jsxs)(U.Z,{sx:{color:"error.main"},children:[(0,B.jsx)(Z.Z,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),(0,B.jsxs)(C.Z,{open:T,onClose:Be,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,B.jsx)(M.Z,{id:"alert-dialog-title",children:V.header}),(0,B.jsx)(R.Z,{children:(0,B.jsx)(P.Z,{id:"alert-dialog-description",children:V.body})}),(0,B.jsxs)(D.Z,{children:[(0,B.jsx)(w.Z,{onClick:Be,children:"Disagree"}),(0,B.jsx)(w.Z,{onClick:function(){return Fe(V.id,V.status)},autoFocus:!0,children:"Agree"})]})]}),(0,B.jsx)(N.Z,{open:Y,autoHideDuration:6e3,onClose:Ee,children:(0,B.jsxs)(L,{onClose:Ee,severity:ne.color,sx:{width:"100%"},children:[ne.message,"!"]})})]})}}}]);
//# sourceMappingURL=345.e0c366d8.chunk.js.map