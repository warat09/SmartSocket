"use strict";(self.webpackChunkSmartSocket=self.webpackChunkSmartSocket||[]).push([[387],{5387:function(e,r,t){t.r(r),t.d(r,{default:function(){return re}});var n=t(4165),i=t(5861),a=t(885),l=t(1413),s=t(5987),d=t(2791),o=t(6907),u=t(7689),c=t(763),x=t(9164),h=t(3767),p=t(890),f=t(6151),Z=t(4721),m=t(7621),j=t(9281),g=t(9836),v=t(3382),w=t(5855),b=t(3994),y=t(3044),S=t(3400),q=t(5527),C=t(6812),R=t(5473),k=t(3786),W=t(5289),P=t(5661),I=t(9157),T=t(1691),V=t(7123),D=t(8870),Q=t(9504),U=t(3609),_=t(8550),N=t(8096),M=t(4925),A=t(5594),E=t(7071),B=t(2363),L=t(5646),O=t(9658),z=t(79),F=t(6734),$=t(8904),H=t(8436),J=t(5290),G=t(184),K=["onChange"],X=(0,d.forwardRef)((function(e,r){var t=e.onChange,n=(0,s.Z)(e,K);return(0,G.jsx)(H.oc,(0,l.Z)((0,l.Z)({},n),{},{mask:"0-0000-00000-00-0",definitions:{"#":/[1-9]/},inputRef:r,onAccept:function(r){return t({target:{name:e.name,value:r}})},overwrite:!0}))})),Y=[{id:"fullname",label:"Name",alignRight:!1},{id:"email",label:"Email",alignRight:!1},{id:"id_card",label:"ID card",alignRight:!1},{id:"departure",label:"Departure",alignRight:!1},{id:"role",label:"Role",alignRight:!1},{id:"status_user",label:"Status_user",alignRight:!1},{id:"",label:"",alignRight:!1}];function ee(e,r,t){return r[t]<e[t]?-1:r[t]>e[t]?1:0}var re=function(){var e=(0,u.s0)(),r=(0,d.useState)(""),t=(0,a.Z)(r,2),s=t[0],H=t[1],K=(0,d.useState)([]),re=(0,a.Z)(K,2),te=re[0],ne=re[1],ie=(0,d.useState)(null),ae=(0,a.Z)(ie,2),le=ae[0],se=ae[1],de=(0,d.useState)(0),oe=(0,a.Z)(de,2),ue=oe[0],ce=oe[1],xe=(0,d.useState)("asc"),he=(0,a.Z)(xe,2),pe=he[0],fe=he[1],Ze=(0,d.useState)([]),me=(0,a.Z)(Ze,2),je=me[0],ge=me[1],ve=(0,d.useState)("fullname"),we=(0,a.Z)(ve,2),be=we[0],ye=we[1],Se=(0,d.useState)(""),qe=(0,a.Z)(Se,2),Ce=qe[0],Re=qe[1],ke=(0,d.useState)(5),We=(0,a.Z)(ke,2),Pe=We[0],Ie=We[1],Te=(0,d.useState)(!1),Ve=(0,a.Z)(Te,2),De=Ve[0],Qe=Ve[1],Ue=(0,d.useState)(!1),_e=(0,a.Z)(Ue,2),Ne=_e[0],Me=_e[1],Ae=(0,d.useState)(!1),Ee=(0,a.Z)(Ae,2),Be=Ee[0],Le=Ee[1],Oe=(0,d.useState)({}),ze=(0,a.Z)(Oe,2),Fe=ze[0],$e=ze[1],He=d.useState({header:"",body:"",id:0,status:0}),Je=(0,a.Z)(He,2),Ge=Je[0],Ke=Je[1],Xe=(0,d.useState)(!1),Ye=(0,a.Z)(Xe,2),er=Ye[0],rr=Ye[1],tr=(0,d.useState)({message:"",color:""}),nr=(0,a.Z)(tr,2),ir=nr[0],ar=nr[1],lr=(0,J.cI)({reValidateMode:"onBlur"}),sr=lr.control,dr=lr.handleSubmit,or=lr.watch,ur=lr.reset,cr={username:{required:"Username is Required"},password:{required:"Password is Required"},confirmpassword:{required:"ConfirmPassword is Required",validate:"Password Not Match"},name:{required:"Name is Required"},surname:{required:"Surname is Required"},email:{required:"Email is Required",pattern:"Invalid Email Address"},card:{required:"Id Card is Required",pattern:"Invalid Id Card"},role:{required:"Role is Required"},departure:{required:"Departure is Required"}},xr=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ne,e.next=3,(0,$.Rf)("/User/AllUser",r);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),hr=function(){Qe(!1)},pr=function(e,r){"clickaway"!==r&&rr(!1)},fr=ue>0?Math.max(0,(1+ue)*Pe-te.length):0,Zr=function(e,r,t){var n=e.map((function(e,r){return[e,r]}));return n.sort((function(e,t){var n=r(e[0],t[0]);return 0!==n?n:e[1]-t[1]})),t?(0,c.filter)(e,(function(e){return-1!==e.fullname.toLowerCase().indexOf(t.toLowerCase())})):n.map((function(e){return e[0]}))}(te,function(e,r){return"desc"===e?function(e,t){return ee(e,t,r)}:function(e,t){return-ee(e,t,r)}}(pe,be),Ce),mr=!Zr.length&&!!Ce,jr=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se(null),1===r?(ur({}),Le(!0)):(Qe(!0),Ke({header:"Delete",body:"Are you sure want to delete?",id:0,status:0}));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),gr=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,$.OL)("/User/AllUser/".concat(Fe.id),s);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vr=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),e.next=3,(0,$.z2)("/User/Register",s,r.name,r.surname,r.id_card,r.password,r.email,r.role,r.departure);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),wr=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,$.Nq)("/User/AllUser/".concat(Fe.id),s,r.editname,r.editsurname,r.editid_card,r.editemail,r.editrole,r.editdeparture);case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){var r=localStorage.getItem("User");if(null!==window.history.state){var t=window.history.state,n=t.open,i=t.message;1===n&&(ar({message:i,color:"success"}),rr(!0),window.history.replaceState({},"",""))}if(r&&"undefined"!==r){var a=JSON.parse(r);xr(a.token),H(a.token)}else e("/login")}),[]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(o.ql,{children:(0,G.jsx)("title",{children:" User: List | SmartSocket "})}),(0,G.jsxs)(x.Z,{children:[(0,G.jsxs)(h.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:5,mt:2},children:[(0,G.jsx)(p.Z,{variant:"h4",gutterBottom:!0,children:"User List"}),(0,G.jsx)(f.Z,{variant:"contained",startIcon:(0,G.jsx)(z.Z,{icon:"eva:plus-fill"}),onClick:function(){return Me(!0)},children:"New User"})]}),(0,G.jsx)(Z.Z,{sx:{borderBottomWidth:3,mb:3,borderColor:"black",borderRadius:1}}),(0,G.jsxs)(m.Z,{children:[(0,G.jsx)(F.s,{numSelected:je.length,filterName:Ce,onFilterName:function(e){ce(0),Re(e.target.value)}}),(0,G.jsx)(j.Z,{sx:{minWidth:800},children:(0,G.jsxs)(g.Z,{children:[(0,G.jsx)(F.e,{order:pe,orderBy:be,headLabel:Y,rowCount:te.length,numSelected:je.length,onRequestSort:function(e,r){fe(be===r&&"asc"===pe?"desc":"asc"),ye(r)},onSelectAllClick:function(e){if(e.target.checked){var r=te.map((function(e){return e.id_user}));ge(r)}else ge([])}}),(0,G.jsxs)(v.Z,{children:[Zr.slice(ue*Pe,ue*Pe+Pe).map((function(e,r){var t=e.id_user,n=e.id_card,i=e.fullname,a=e.email,l=e.departure,s=e.role,d=e.status_user,o=-1!==je.indexOf(t);return(0,G.jsxs)(w.Z,{hover:!0,tabIndex:-1,role:"checkbox",selected:o,children:[(0,G.jsx)(b.Z,{align:"center",children:(0,G.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:2,sx:{pl:3},children:[(0,G.jsx)(y.Z,{src:"https://ui-avatars.com/api/?background=random&bold=true&name="+i}),(0,G.jsx)(p.Z,{variant:"subtitle2",noWrap:!0,children:i})]})}),(0,G.jsx)(b.Z,{align:"center",children:a}),(0,G.jsx)(b.Z,{align:"center",children:(0,G.jsx)(p.Z,{noWrap:!0,children:n})}),(0,G.jsx)(b.Z,{align:"center",children:l}),(0,G.jsx)(b.Z,{align:"center",children:s}),(0,G.jsx)(b.Z,{align:"center",children:d}),1!==t&&(0,G.jsx)(b.Z,{align:"right",children:(0,G.jsx)(S.Z,{size:"large",color:"inherit",onClick:function(e){return function(e,r,t,n,i,a,l,s){console.log(r,t,n,i,a,l,s);var d=n.split(" ");$e({id:r,name:d[0],surname:d[1],email:i,id_card:t,departure:a,role:l}),se(e.currentTarget)}(e,t,n,i,a,l,s,d)},children:(0,G.jsx)(z.Z,{icon:"eva:more-vertical-fill"})})}),1===t&&(0,G.jsx)(b.Z,{align:"right"})]},t)})),fr>0&&(0,G.jsx)(w.Z,{style:{height:53*fr},children:(0,G.jsx)(b.Z,{colSpan:6})})]}),mr&&(0,G.jsx)(v.Z,{children:(0,G.jsx)(w.Z,{children:(0,G.jsx)(b.Z,{align:"center",colSpan:7,sx:{py:3},children:(0,G.jsxs)(q.Z,{sx:{textAlign:"center"},children:[(0,G.jsx)(p.Z,{variant:"h6",paragraph:!0,children:"Not found"}),(0,G.jsxs)(p.Z,{variant:"body2",children:["No results found for \xa0",(0,G.jsxs)("strong",{children:['"',Ce,'"']}),".",(0,G.jsx)("br",{})," Try checking for typos or using complete words."]})]})})})})]})}),(0,G.jsx)(C.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:te.length,rowsPerPage:Pe,page:ue,onPageChange:function(e,r){ce(r)},onRowsPerPageChange:function(e){ce(0),Ie(parseInt(e.target.value,10))}})]})]}),(0,G.jsxs)(R.ZP,{open:Boolean(le),anchorEl:le,onClose:function(){se(null)},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{p:1,width:140,"& .MuiMenuItem-root":{px:1,typography:"body2",borderRadius:.75}}},children:[(0,G.jsxs)(k.Z,{onClick:function(){return jr(1)},children:[(0,G.jsx)(z.Z,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),(0,G.jsxs)(k.Z,{sx:{color:"error.main"},onClick:function(){return jr(0)},children:[(0,G.jsx)(z.Z,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),(0,G.jsxs)(W.Z,{open:De,onClose:hr,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"500px"}}},children:[(0,G.jsx)(P.Z,{id:"alert-dialog-title",children:Ge.header}),(0,G.jsx)(I.Z,{children:(0,G.jsx)(T.Z,{id:"alert-dialog-description",children:Ge.body})}),(0,G.jsxs)(V.Z,{children:[(0,G.jsx)(f.Z,{onClick:hr,children:"Disagree"}),(0,G.jsx)(f.Z,{onClick:gr,autoFocus:!0,children:"Agree"})]})]}),(0,G.jsxs)(W.Z,{open:Ne,onClose:function(){Me(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"1000px",paddingTop:"20px"}}},children:[(0,G.jsx)(P.Z,{id:"form-dialog-title",children:(0,G.jsx)(p.Z,{variant:"h3",gutterBottom:!0,children:"Create a new user"})}),(0,G.jsx)(I.Z,{children:(0,G.jsx)(h.Z,{spacing:3,children:(0,G.jsxs)(D.Z,{component:"form",onSubmit:dr(vr),children:[(0,G.jsx)(Q.Z,{sx:{pt:4},children:(0,G.jsx)(D.Z,{sx:{m:-1.5},children:(0,G.jsxs)(U.Z,{container:!0,spacing:2,pl:2,pr:2,children:[(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"name",rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Name",defaultValue:"",error:void 0!==t,helperText:t?cr.name[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"surname",defaultValue:"",rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Surname",error:void 0!==t,helperText:t?cr.surname[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"email",defaultValue:"",rules:{required:!0,pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Email",error:void 0!==t,helperText:t?cr.email[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"id_card",defaultValue:"",rules:{required:!0,pattern:/([0-9]{1})-([0-9]{4})-([0-9]{5})-([0-9]{2})-([0-9]{1})/},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"ID Card",InputProps:{inputComponent:X},error:void 0!==t,helperText:t?cr.card[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"role",defaultValue:"",rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsxs)(N.Z,{error:void 0!==t,fullWidth:!0,children:[(0,G.jsx)(M.Z,{id:"demo-simple-select-label",children:"Role"}),(0,G.jsxs)(A.Z,(0,l.Z)((0,l.Z)({},r),{},{fullWidth:!0,labelId:"demo-simple-select-label",label:"Role",error:void 0!==t,children:[(0,G.jsx)(k.Z,{value:"admin",children:"Admin"}),(0,G.jsx)(k.Z,{value:"user",children:"User"})]})),(0,G.jsx)(E.Z,{children:t?cr.role[t.type]:""})]})}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"departure",defaultValue:"",rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Departure",error:void 0!==t,helperText:t?cr.departure[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"password",defaultValue:"",rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"password",fullWidth:!0,label:"Password",error:void 0!==t,helperText:t?cr.password[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"con-password",defaultValue:"",rules:{required:!0,validate:function(e){if(or("password")!=e)return!1}},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"password",fullWidth:!0,label:"ConfirmPassword",error:void 0!==t,helperText:t?cr.confirmpassword[t.type]:""}))}})})]})})}),(0,G.jsx)(Z.Z,{}),(0,G.jsx)(B.Z,{children:(0,G.jsx)(f.Z,{fullWidth:!0,variant:"text",type:"submit",children:"Create a new user"})})]})})})]}),(0,G.jsxs)(W.Z,{open:Be,onClose:function(){Le(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"1000px",paddingTop:"20px"}}},children:[(0,G.jsx)(P.Z,{id:"form-dialog-title",children:(0,G.jsxs)(p.Z,{sx:{paddingLeft:"30px",paddingTop:"10px"},variant:"h4",gutterBottom:!0,children:["Edit User ",Fe.name]})}),(0,G.jsx)(I.Z,{children:(0,G.jsx)(h.Z,{spacing:3,children:(0,G.jsxs)(D.Z,{component:"form",onSubmit:dr(wr),children:[(0,G.jsx)(Q.Z,{sx:{pt:4},children:(0,G.jsx)(D.Z,{sx:{m:-1.5},children:(0,G.jsxs)(U.Z,{container:!0,spacing:2,pl:2,pr:2,children:[(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"editname",defaultValue:Fe.name,rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)({defaultValue:Fe.name,type:"text",fullWidth:!0,label:"Name",error:void 0!==t,helperText:t?cr.name[t.type]:""},r))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"editsurname",defaultValue:Fe.surname,rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Surname",error:void 0!==t,helperText:t?cr.surname[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"editemail",defaultValue:Fe.email,rules:{required:!0,pattern:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Email",error:void 0!==t,helperText:t?cr.email[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"editid_card",defaultValue:Fe.id_card,rules:{required:!0,pattern:/([0-9]{1})-([0-9]{4})-([0-9]{5})-([0-9]{2})-([0-9]{1})/},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"ID Card",InputProps:{inputComponent:X},error:void 0!==t,helperText:t?cr.card[t.type]:"",defaultValue:Fe.id_card}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"editrole",defaultValue:Fe.role,rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Role",error:void 0!==t,helperText:t?cr.role[t.type]:""}))}})}),(0,G.jsx)(U.Z,{xs:12,md:6,children:(0,G.jsx)(J.Qr,{control:sr,name:"editdeparture",defaultValue:Fe.departure,rules:{required:!0},render:function(e){var r=e.field,t=e.fieldState.error;return(0,G.jsx)(_.Z,(0,l.Z)((0,l.Z)({},r),{},{type:"text",fullWidth:!0,label:"Departure",error:void 0!==t,helperText:t?cr.departure[t.type]:"",defaultValue:Fe.departure}))}})})]})})}),(0,G.jsx)(Z.Z,{}),(0,G.jsx)(B.Z,{children:(0,G.jsx)(f.Z,{fullWidth:!0,variant:"text",type:"submit",children:"Save Changes"})})]})})})]}),(0,G.jsx)(L.Z,{open:er,autoHideDuration:3e3,onClose:pr,children:(0,G.jsxs)(O.Z,{onClose:pr,variant:"filled",severity:ir.color,sx:{width:"100%"},children:[ir.message,"!"]})})]})}}}]);
//# sourceMappingURL=387.f153e74a.chunk.js.map