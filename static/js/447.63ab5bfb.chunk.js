"use strict";(self.webpackChunkSmartSocket=self.webpackChunkSmartSocket||[]).push([[447],{1447:function(e,n,t){t.r(n);var a=t(4942),r=t(1413),i=t(4165),s=t(5861),c=t(885),o=t(2791),l=t(6907),d=t(7689),u=t(763),h=t(5855),g=t(3994),Z=t(3400),x=t(6151),m=t(8870),p=t(9836),f=t(3382),j=t(6812),b=t(9164),S=t(3767),v=t(890),w=t(4721),k=t(7621),_=t(9281),y=t(5527),M=t(5646),C=t(9658),A=t(9152),P=t(6734),R=t(8904),I=t(5172),B=t(5678),L=t(6890),N=t(6125),q=t(3875),z=t(4512),D=t(5825),H=t(9266),O=t(6856),T=t(3285),E=t(6934),W=t(1608),F=t(464),U=t(8796),J=t(1705),G=t(184),K=[{id:"opendiv",label:"",alignRight:!1},{id:"Asset_name",label:"Assets",alignRight:!1},{id:"Asset_expire_hour",label:"ExpireHour",alignRight:!1},{id:"Match_remain_time",label:"TimeUse",alignRight:!1},{id:"",label:"Action",alignRight:!1}];function Q(e,n,t){return n[t]<e[t]?-1:n[t]>e[t]?1:0}n.default=function(){var e=(0,d.s0)(),n=(0,o.useState)(""),t=(0,c.Z)(n,2),V=t[0],X=t[1],Y=(0,o.useState)([]),$=(0,c.Z)(Y,2),ee=$[0],ne=$[1],te=(0,o.useState)([]),ae=(0,c.Z)(te,2),re=(ae[0],ae[1]),ie=(0,o.useState)(0),se=(0,c.Z)(ie,2),ce=se[0],oe=se[1],le=(0,o.useState)("asc"),de=(0,c.Z)(le,2),ue=de[0],he=de[1],ge=(0,o.useState)([]),Ze=(0,c.Z)(ge,2),xe=Ze[0],me=Ze[1],pe=(0,o.useState)("Asset_name"),fe=(0,c.Z)(pe,2),je=fe[0],be=fe[1],Se=(0,o.useState)(""),ve=(0,c.Z)(Se,2),we=ve[0],ke=ve[1],_e=(0,o.useState)(5),ye=(0,c.Z)(_e,2),Me=ye[0],Ce=ye[1],Ae=(0,o.useState)(!1),Pe=(0,c.Z)(Ae,2),Re=Pe[0],Ie=Pe[1],Be=(0,o.useState)({message:"",color:""}),Le=(0,c.Z)(Be,2),Ne=Le[0],qe=Le[1],ze=(0,o.useState)(""),De=(0,c.Z)(ze,2),He=(De[0],De[1],function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ne,e.next=3,(0,R.Rf)("/Maintenance/AllMaintenance",n);case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=re,e.next=8,(0,R.sI)("/Match/SelectMaintenance",n);case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),Oe=function(e,n){"clickaway"!==n&&Ie(!1)},Te=ce>0?Math.max(0,(1+ce)*Me-ee.length):0,Ee=function(e,n,t){var a=e.map((function(e,n){return[e,n]}));return a.sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t?(0,u.filter)(e,(function(e){return-1!==e.fullname.toLowerCase().indexOf(t.toLowerCase())})):a.map((function(e){return e[0]}))}(ee,function(e,n){return"desc"===e?function(e,t){return Q(e,t,n)}:function(e,t){return-Q(e,t,n)}}(ue,je),we),We=!Ee.length&&!!we;function Fe(e){var n=e.row,t=n.Match_status_rent,l=n.Asset_name,d=n.Asset_expire_hour,u=n.Match_sum_used_time,b=n.History,S=(0,o.useState)(!1),v=(0,c.Z)(S,2),w=v[0],k=v[1],_=(0,o.useState)(4),y=(0,c.Z)(_,2),M=y[0],C=y[1],A=(0,o.useState)(0),P=(0,c.Z)(A,2),K=P[0],Q=P[1],X=(0,o.useState)(void 0),Y=(0,c.Z)(X,2),$=(Y[0],Y[1],function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,R.xm)("/Maintenance/AddStatusMaintenance",V,n,t);case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),ee=(0,E.ZP)("div")((function(e){var n=e.theme,t=e.ownerState;return(0,r.Z)((0,r.Z)({backgroundColor:"dark"===n.palette.mode?n.palette.grey[700]:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},t.active&&{backgroundImage:"linear-gradient(315deg, #29539b 0%, #1e3b70 74%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"}),t.completed&&{backgroundImage:"linear-gradient(315deg, #29539b 0%, #1e3b70 74%)"})})),ne=(0,E.ZP)(O.Z)((function(e){var n,t=e.theme;return n={},(0,a.Z)(n,"&.".concat(T.Z.alternativeLabel),{top:22}),(0,a.Z)(n,"&.".concat(T.Z.active),(0,a.Z)({},"& .".concat(T.Z.line),{backgroundImage:"linear-gradient(315deg, #29539b 0%, #1e3b70 74%)"})),(0,a.Z)(n,"&.".concat(T.Z.completed),(0,a.Z)({},"& .".concat(T.Z.line),{backgroundImage:"linear-gradient(315deg, #29539b 0%, #1e3b70 74%)"})),(0,a.Z)(n,"& .".concat(T.Z.line),{height:3,border:0,backgroundColor:"dark"===t.palette.mode?t.palette.grey[800]:"#eaeaf0",borderRadius:1}),n}));function te(e){var n=e.active,t=e.completed,a=e.className,r={1:(0,G.jsx)(U.Z,{}),2:(0,G.jsx)(J.Z,{}),3:(0,G.jsx)(W.Z,{}),4:(0,G.jsx)(F.Z,{})};return(0,G.jsx)(ee,{ownerState:{completed:t,active:n},className:a,children:r[String(e.icon)]})}var ae=0,re=["Request Accepted","Maintenancing","Success Maintenance"];switch(b[0].Maintenance_status_maintenance){case"Waiting for Delivery":default:break;case"Request Accepted":ae+=1;break;case"Maintenancing":ae+=2;break;case"Success Maintenance":ae+=3,re[3]="success"}return(0,G.jsxs)(o.Fragment,{children:[(0,G.jsxs)(h.Z,{sx:{"& > *":{borderBottom:"unset"}},children:[(0,G.jsx)(g.Z,{children:(0,G.jsx)(Z.Z,{"aria-label":"expand row",size:"small",onClick:function(){return k(!w)},children:w?(0,G.jsx)(B.Z,{}):(0,G.jsx)(I.Z,{})})}),(0,G.jsx)(g.Z,{align:"center",children:l}),(0,G.jsx)(g.Z,{align:"center",children:(0,H.Z)(d)}),(0,G.jsx)(g.Z,{align:"center",children:(0,H.Z)(u)}),(0,G.jsxs)(g.Z,{align:"center",children:["Available"===t&&(0,G.jsx)(x.Z,{variant:"contained",size:"small",color:"success",onClick:function(){return $(re[ae],n.History[0].Maintenance_id_assets)},children:re[ae]}),"Available"!==t&&(0,G.jsx)(x.Z,{disabled:!0,variant:"contained",size:"small",color:"success",onClick:function(){return $(re[ae],n.History[0].Maintenance_id_assets)},children:re[ae]})]})]}),(0,G.jsx)(h.Z,{children:(0,G.jsx)(g.Z,{style:{paddingBottom:0,paddingTop:0},colSpan:5,children:(0,G.jsx)(N.Z,{in:w,timeout:"auto",unmountOnExit:!0,children:(0,G.jsxs)(m.Z,{sx:{paddingTop:3,paddingBottom:3},children:[(0,G.jsx)(m.Z,{sx:{width:"100%",paddingTop:5,paddingBottom:5},children:(0,G.jsx)(q.Z,{alternativeLabel:!0,activeStep:ae,connector:(0,G.jsx)(ne,{}),children:["Waiting for Delivery","Request Accepted","Maintenancing","Success Maintenance"].map((function(e){return(0,G.jsx)(z.Z,{children:(0,G.jsx)(D.Z,{StepIconComponent:te,children:e})},e)}))})}),(0,G.jsxs)(p.Z,{size:"small","aria-label":"purchases",children:[(0,G.jsx)(L.Z,{children:(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(g.Z,{align:"center",children:"Status"}),(0,G.jsx)(g.Z,{align:"center",children:"Date"})]})}),(0,G.jsx)(f.Z,{children:b.slice(K*M,K*M+M).map((function(e){return(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(g.Z,{component:"th",scope:"row",align:"center",children:e.Maintenance_status_maintenance}),(0,G.jsx)(g.Z,{align:"center",children:new Date(e.Maintenance_date_maintenance).toLocaleString("sv-SE",{timeZone:"Asia/Bangkok"})})]},e.Maintenance_id_maintenance)}))})]}),(0,G.jsx)(j.Z,{rowsPerPageOptions:[4,8,12],component:"div",count:b.length,rowsPerPage:M,page:K,onPageChange:function(e,n){Q(n)},onRowsPerPageChange:function(e){Q(0),C(parseInt(e.target.value,10))}})]})})})})]})}return(0,o.useEffect)((function(){var n=localStorage.getItem("User");if(null!==window.history.state){var t=window.history.state,a=t.open,r=t.message;1===a&&(qe({message:r,color:"success"}),Ie(!0),window.history.replaceState({},"",""))}if(n&&"undefined"!==n){var i=JSON.parse(n);He(i.token),X(i.token)}else e("/login")}),[]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(l.ql,{children:(0,G.jsx)("title",{children:" Maintenance: List | SmartSocket "})}),(0,G.jsxs)(b.Z,{children:[(0,G.jsx)(S.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:5,mt:2},children:(0,G.jsx)(v.Z,{variant:"h4",gutterBottom:!0,children:"Maintenance"})}),(0,G.jsx)(w.Z,{sx:{borderBottomWidth:3,mb:3,borderColor:"black",borderRadius:1}}),(0,G.jsxs)(k.Z,{children:[(0,G.jsx)(P.s,{numSelected:xe.length,filterName:we,onFilterName:function(e){oe(0),ke(e.target.value)}}),(0,G.jsx)(A.Z,{children:(0,G.jsx)(_.Z,{sx:{minWidth:800},children:(0,G.jsxs)(p.Z,{children:[(0,G.jsx)(P.e,{order:ue,orderBy:je,headLabel:K,rowCount:ee.length,numSelected:xe.length,onRequestSort:function(e,n){he(je===n&&"asc"===ue?"desc":"asc"),be(n)},onSelectAllClick:function(e){if(e.target.checked){var n=ee.map((function(e){return e.id_user}));me(n)}else me([])}}),(0,G.jsxs)(f.Z,{children:[Ee.slice(ce*Me,ce*Me+Me).map((function(e,n){return(0,G.jsx)(Fe,{row:e})})),Te>0&&(0,G.jsx)(h.Z,{style:{height:53*Te},children:(0,G.jsx)(g.Z,{colSpan:6})})]}),We&&(0,G.jsx)(f.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(g.Z,{align:"center",colSpan:7,sx:{py:3},children:(0,G.jsxs)(y.Z,{sx:{textAlign:"center"},children:[(0,G.jsx)(v.Z,{variant:"h6",paragraph:!0,children:"Not found"}),(0,G.jsxs)(v.Z,{variant:"body2",children:["No results found for \xa0",(0,G.jsxs)("strong",{children:['"',we,'"']}),".",(0,G.jsx)("br",{})," Try checking for typos or using complete words."]})]})})})})]})})}),(0,G.jsx)(j.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:ee.length,rowsPerPage:Me,page:ce,onPageChange:function(e,n){oe(n)},onRowsPerPageChange:function(e){oe(0),Ce(parseInt(e.target.value,10))}})]})]}),(0,G.jsx)(M.Z,{open:Re,autoHideDuration:6e3,onClose:Oe,children:(0,G.jsxs)(C.Z,{onClose:Oe,severity:Ne.color,sx:{width:"100%"},children:[Ne.message,"!"]})})]})}}}]);
//# sourceMappingURL=447.63ab5bfb.chunk.js.map